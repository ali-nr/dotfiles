# Tmux config - matching WezTerm keybindings
# Leader: Ctrl+B (WezTerm uses Ctrl+A)

# ----------------------------------------------------------------------------
# General Settings
# ----------------------------------------------------------------------------
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -ga terminal-features ",xterm-256color:hyperlinks"
set -g allow-passthrough on
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g escape-time 0

# Scrollback - 1 million lines per pane (essentially unlimited)
set -g history-limit 1000000

# ----------------------------------------------------------------------------
# Pane Management
# ----------------------------------------------------------------------------
# Splitting (same as WezTerm)
bind | split-window -h -c "#{pane_current_path}"    # Ctrl+B then Shift+| → side by side
bind - split-window -v -c "#{pane_current_path}"    # Ctrl+B then - → top/bottom

# Navigation - vim style (same as WezTerm)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Navigation - arrow keys (same as WezTerm)
bind Left select-pane -L
bind Down select-pane -D
bind Up select-pane -U
bind Right select-pane -R

# Resizing - vim style with Shift (same as WezTerm)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Quick pane switching: Ctrl+B q → shows numbers → press number to jump
# Increase timeout to 2 seconds (default is 500ms)
set -g display-panes-time 2000

# Close pane (same as WezTerm)
bind x kill-pane                                     # Ctrl+B then x

# Zoom pane (same as WezTerm)
bind z resize-pane -Z                                # Ctrl+B then z

# ----------------------------------------------------------------------------
# Tab (Window) Management
# ----------------------------------------------------------------------------
bind c new-window -c "#{pane_current_path}"          # Ctrl+B then c → new tab
bind n next-window                                    # Ctrl+B then n → next tab
bind p previous-window                                # Ctrl+B then p → prev tab

# Quick tab switching by number (same as WezTerm)
bind 1 select-window -t 1
bind 2 select-window -t 2
bind 3 select-window -t 3
bind 4 select-window -t 4
bind 5 select-window -t 5
bind 6 select-window -t 6
bind 7 select-window -t 7
bind 8 select-window -t 8
bind 9 select-window -t 9

# ----------------------------------------------------------------------------
# Copy & Search
# ----------------------------------------------------------------------------
bind [ copy-mode                                      # Ctrl+B then [ → copy mode
bind / copy-mode \; send-keys ?                       # Ctrl+B then / → search

# Use vim keys in copy mode
setw -g mode-keys vi

# ----------------------------------------------------------------------------
# Other
# ----------------------------------------------------------------------------
bind r source-file ~/.tmux.conf \; display "Config reloaded!"  # Ctrl+B then r

# Detach
bind d detach-client                                  # Ctrl+B then d

# ----------------------------------------------------------------------------
# Status Bar (simple)
# ----------------------------------------------------------------------------
set -g status-style bg=colour235,fg=colour136
set -g status-left "#[fg=green]#S "
set -g status-right "#[fg=yellow]%H:%M"
set -g status-left-length 20

# Active pane border
set -g pane-active-border-style fg=green
